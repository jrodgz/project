<!DOCTYPE html>
<html>
    <head>
        <title>Start Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="css/main.css">
        
        <script src="js/d3.min.js"></script>
        <script src="js/jquery-1.12.2.min.js"></script>
        <script src="js/visualization.js" ></script>
        <script src="js/global.js"></script>
    </head>
    <body>

        <div class="content" id="results">Give me some content</div>
        <div class="errorDiv" id="current_status"></div>

        <script>
            // ID of the Google Spreadsheet, Make sure it is public or set to Anyone with link can view 
            var spreadsheetID = "1O0JIuvFus0U-WYZ_3IJBU-PB3amRQhfH63hAq8dY6aE";
            var url = "https://spreadsheets.google.com/feeds/list/" + spreadsheetID + "/od6/public/values?alt=json";
            var statusDiv = $('#current_status');
            var resultsDiv = $('#results')

            visualization.google.setStatusDiv(statusDiv);
            visualization.google.setSheetUrl(url)
            visualization.google.loadSheet().then(function (data) {
                
                // Example: to print the values of the data, we can do this
                var entry = data.feed.entry;
                $(entry).each(function () {
                    var tags = this.gsx$tags.$t.split(",");
                    var mementos = this.gsx$mementos.$t.split(",");
                    visualization.parser.addMemento(mementos);
                    updateStatus(statusDiv, "added " + mementos.length + " mementos for " +  this.gsx$uri.$t)
                    visualization.parser.addTag(tags);
                    updateStatus(statusDiv, "added " + tags.length + " tags for " +  this.gsx$uri.$t)
                });
                
                setParsingComplete(true)
                updateStatus(statusDiv, "mementos were added " + visualization.parser.getMementos().length);
                updateStatus(statusDiv, "tags were added " + visualization.parser.getTags().length);
                
            });
            
            waitForParsingComplete(statusDiv);
            
        </script>

    </body>
</html>
